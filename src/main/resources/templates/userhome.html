<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>
    <title>User Home</title>
    <meta charset="utf-8" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" th:src="@{/js/datepicker.js}"></script>

</head>

<body>
<button onclick="addDate()">Add meg a dátumot</button>
<div id="leker"></div>
<div>
    <p>
        Welcome <span sec:authentication="principal.username">User</span>
    </p>
    <p>
        <a th:href="@{/logout}">Logout</a>
    </p>
    <div sec:authorize="hasRole('ADMIN')">
        <h3>You will see this only if you are ADMIN</h3>
        <p>
            <a href="/admin/home">Admin Home</a>
        </p>
    </div>
    <div>
        <p>Itt van a messenger chatbot</p>
    </div>
    <!-- ManyChat -->

    <form id="dateForm" name="dateForm">
            <label>Kezdeti nap</label><input id="startDate" type="date">
            <label>Utolsó nap</label><input id="endDate" type="date">
            <input type="radio" name="radio" value="leave">Szabadság
            <input type="radio" name="radio" value="sickpay">Táppénz
            <button id="dateBtn" onclick="addDate()">Küldés</button>
            <div id="invalidDate"></div>
        </form>
    </div>
</div>
<script>
    var div = document.createElement('div');
    div.className = 'fb-customerchat';
    div.setAttribute('page_id', '105197630914532');
    div.setAttribute('ref', '');
    document.body.appendChild(div);
    window.fbMessengerPlugins = window.fbMessengerPlugins || {
        init: function () {
            FB.init({
                appId            : '1678638095724206',
                autoLogAppEvents : true,
                xfbml            : true,
                version          : 'v3.3'
            });
        }, callable: []
    };
    window.fbAsyncInit = window.fbAsyncInit || function () {
        window.fbMessengerPlugins.callable.forEach(function (item) { item(); });
        window.fbMessengerPlugins.init();
    };
    setTimeout(function () {
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk/xfbml.customerchat.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    }, 0);
</script>
</body>
</html>